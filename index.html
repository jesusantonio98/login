<html>
<head>
	<title> login </title>

	<!-- CSS only -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<link rel="stylesheet" href="static/css/index.css">

	<!-- JS, Popper.js, and jQuery -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

</head>
<body>
	<div class="modal-dialog text-center">
		<div class="col-sm-8 main-section">
			<div class="modal-content">
				<div class="col-12 user-img">
					<img src="static/img/user.png"/>
				</div>

				<div id="mensaje"></div>

				<from class="col-12">
					<div class="form-group">
						<input type="text" id="usuario" value="otro valor" class="form-control mb-2 mr-sm-2" name ="username" autocomplete="off" placeholder="usuario">
					</div>
					<div class="form-group">
						<input type="password" id="password" value="sdfsdfsdfds" class="form-control mb-2 mr-sm-2" name="password" placeholder="contrasena">
					</div>
					<div class="col">
						<button class="btn btn-primary" type="button" style="height:30px; width:30px;" onclick="mostrarContrasena()">*</button>
					</div>
					<button id="btn_ingresar" type="submit" class="btn btn-primary">
						<i class="fas fa-sign-in-alt"></i>  Ingresar
					</button>
				</from>
				<div class="col-12 forgot">
					<a href="#">recordar contrasena</a>
				</div>

			</div>
		</div>

	</div>

	<script type="text/javascript">

	// esta es la funcion inicial
	let inicio = () => {
		$('#usuario').val('')
		$('#password').val('')
	}

	// este es el evento para ejecutar el ready del cocument
	$(document).ready(() => {
		verif_sesion()
		inicio()

		$('#btn_ingresar').click( () => {
			let usu = $('#usuario').val()
			let pass = $('#password').val()

			validar(usu, pass)
		})

		let validar = (usu1, pass1) => {
			let texto = ''
			$('#mensaje').html('')
			if( usu1 == 'Crisstainca' && pass1 =='america') {
				texto = '<div class="alert alert-warning">usuario correcto</div>'

				alert("Bienvenido " + usu1);
				localStor()
				location.href='inicio.html'
			}
			else{
				texto = '<div class="alert alert-warning">usuario incorrecto</div>'
			}
			$('#mensaje').html(texto)
		}
	})

	//Esta funcion guarda mis datos en localStorage
	function localStor(){
			let user_local = Array(
				{
					usuario_local : usuario.value,
					password_local : password.value
				}
			)
			localStorage.setItem('user',JSON.stringify(user_local))
	}

	function verif_sesion(){
		let getlocal = localStorage.getItem("user");
		if(getlocal != null){
			location.href='inicio.html'
		}
	}

	function mostrarContrasena(){
		var tipo = document.getElementById("password");
		if(tipo.type == "password"){
			tipo.type = "text";
		}else{
			tipo.type = "password";
		}
	};

	//Aqui se habilita y deshabilita el boton Ingresar
	$(document).ready(function(){
		let b_ingresar = $('#btn_ingresar')
		let user = $('#usuario')
		let pasw = $('#password')

		function validarInput(){
			if(user.val() !='' && pasw.val() != ''){
				b_ingresar.removeAttr('disabled' , false)
			}
			else{
				b_ingresar.attr('disabled', true)
			}
		}

		b_ingresar.attr('disabled','false')
		user.keyup(function(){
			validarInput()
		});
		pasw.keyup(function(){
			validarInput()
		});
	});

</script>

</body>
</html>
